<!DOCTYPE html>
<html>
<head>
	<title>promise对象学习</title>
	<meta charset="utf-8">
</head>
<body>
<h2>Promise是一个构造函数，用来生成实例</h2>
<h3>它接受一个函数作为参数，这个函数其实就是then方法，函数的参数分别是resolve和reject，它们也是两个函数，分别对应.then的两个回调函数</h3>
<h2>Promise.prototype.then</h2>
<h3>.then(f1,f2)方法可以接受两个参数，第一个参数是状态转为成功时调用，第二个方法是状态转为失败时调用，第二个参数是可选的不一定提供</h3>
<h2>Promise.prototype.catch</h2>
<h3>.catch(f),是发生错误时，回调f函数，写法是.then().catch()</h3>
<h3>then()的回调函数是异步执行的，也就是说这个回调函数是插入到了事件队列的末尾。</h3>
</body>
<script type="text/javascript">
	var p = new Promise(function(resolve,reject){//resolve和reject是两个回调函数
		// if(/*异步操作成功*/){
		// 	resolve();//把状态从pending(进行中)fulfilled(成功)
		// }else{
		// 	reject();//异步失败，把状态从pending(进行中)转换成rejected(失败)
		// }
	});
	console.dir(Promise);
	p.then(f1,f2);//第二个参数是可选的不一定提供,f1其实就是resolve(),f2就是reject()
	function f1(){
		//异步成功后，执行的代码
	}
	function f2(){
		//异步失败后执行的代码
	}
	p.then(f1,f2).catch(e);
	function e(){
		//发生错误后执行的代码
	}
	/*
		以下代码的输出顺序123
	*/
	var ptest = new Promise(resolve=>{
		console.log(1);
		resolve(3); // resolve() 异步
	});
	ptest.then(res=>{
		console.log(res);
	})
	console.log(2);
</script>
</html>